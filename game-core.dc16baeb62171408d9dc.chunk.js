'use strict';function a5_0x5bed(){const _0x3eb122=['showScoreSummaryModal','push','takeDiscardPile','gameEndedThisTurn','selectedMeldToPlay','createDeck','Cannot\x20undo\x20during\x20AI\x20turn!','shift','warning','showNotification','hand','showSetupModal','isAI','sendPlayerAction','It\x27s\x20','humanPlayerIndex','5mQOejV','Round\x20','every','canUndo','maxUndoHistory','startMultiplayerGame','selectedCards','\x20undid\x20their\x20last\x20move\x20and\x20received\x2025\x20penalty\x20points.\x20Score:\x20','isCurrentPlayerHuman','setPlayerReady','GAME\x20OVER!\x20','AIPlayer','turnPhase','\x20consecutive\x20reshuffles!','\x20ends.\x20','1120602TaKtQF','stringify','playerId','deck','clearSelectedMeld','exportGameLog','bind','gameId','value','Loop\x20restriction\x20removed\x20for\x20','leaveRoom','info','tableMelds','filter','arraysHaveSameElements','No\x20moves\x20to\x20undo!','mustPlayMeldAfterTake','gameStarted','2399088CmvNWg','player-action','potterValue','loadGameModules','resolve','initialize','sort','sallan','addLogEntry','socket','endGame','currentPlayerIndex','\x20wins\x20round\x20','isHuman','\x20gets\x20','Infinite\x20loop\x20detected:\x20Repeating\x20discard\x20pattern\x20with\x20cards\x20[','score','isArray','selectedMeldIndex','discardPile','updateDisplay','gameStartTime','\x20wins\x20with\x20','delete','playAITurn','Infinite\x20loop\x20detected:\x20','find','bindLogToggleEvent','play-meld','drawCard','has','showUndoConfirmationModal','hideSetupModal','drawPile','dealCards','rank','30663oWOFwh','syncGameState','gameLog','81ogXUjO','takenPileCards','players','Game\x20started\x20with\x20','slice','isMultiplayer','error','clearUndoHistory','setupModal','PlayerActions','discard','hasPlayerWon','now','then','map','potterGameState','game-end','playSelectedMeld','\x20-\x20','selectCard','getCurrentPlayer','cards','selectTableMeld','detectedLoopCards','loopThreshold','\x20must\x20take\x20back\x20the\x20looping\x20card\x20','forEach','normal','saveGameState','name','hideScoreSummaryModal','end-turn','cardId','clearLoopDetectionForMatchingCards','some','ranks','2630FEwWgl','take-pile','calculateHandValue','turnHistory','startNewRound','maxHistoryLength','endRound','join','isPotter','lastDiscarderPlayerId','add','penalty','findIndex','undoHistory','splice','values','DeckManager','draw','suit','\x27s\x20turn.','targetScore','getItem','loopDetection','createRoom','Multiplayer\x20mode\x20is\x20not\x20available','updatePotterIndicator','\x20AI).\x20Target\x20score:\x20','undoLastMove','loadAndStartSavedGame','size','turn','5603424UgDYWx','suits','availableMelds','all','MeldSelection','\x20penalty\x20points.\x20Total:\x20','endTurn','Infinite\x20loop\x20detected!\x20Implementing\x20loop\x20prevention\x20rules.','471988imZnCl','\x20starts.\x20Potter\x20card\x20is\x20','dealerIndex','handleInfiniteLoop','status','Loop\x20cards\x20redistributed.\x20Players\x20cannot\x20discard\x20these\x20cards\x20until\x20someone\x20plays\x20a\x20matching\x20meld.','success','confirmUndo','currentRound','from','detectInfiniteLoop','40538qJOGdb','getCurrentHumanPlayer','Game\x20state\x20restored!','webpackChunkpotter_web','2641276FToMVz','round-start','shuffleDeck','resetLoopDetection','parse','hideUndoConfirmationModal','Player\x20','loadGameState','nextTurn','reduce','\x20points!','length','action'];a5_0x5bed=function(){return _0x3eb122;};return a5_0x5bed();}const a5_0x5a89a7=a5_0x2af2;function a5_0x2af2(_0xe76304,_0xacf44e){const _0x5bed20=a5_0x5bed();return a5_0x2af2=function(_0x2af25e,_0x4ef7c7){_0x2af25e=_0x2af25e-0x189;let _0x49d073=_0x5bed20[_0x2af25e];return _0x49d073;},a5_0x2af2(_0xe76304,_0xacf44e);}(function(_0xe2eee9,_0x353398){const _0x2983cb=a5_0x2af2,_0xb280e6=_0xe2eee9();while(!![]){try{const _0x495411=-parseInt(_0x2983cb(0x1bc))/0x1+parseInt(_0x2983cb(0x1c7))/0x2*(parseInt(_0x2983cb(0x230))/0x3)+parseInt(_0x2983cb(0x1cb))/0x4*(parseInt(_0x2983cb(0x1e8))/0x5)+-parseInt(_0x2983cb(0x209))/0x6+parseInt(_0x2983cb(0x1f7))/0x7+-parseInt(_0x2983cb(0x1b4))/0x8+parseInt(_0x2983cb(0x22d))/0x9*(parseInt(_0x2983cb(0x195))/0xa);if(_0x495411===_0x353398)break;else _0xb280e6['push'](_0xb280e6['shift']());}catch(_0x41559f){_0xb280e6['push'](_0xb280e6['shift']());}}}(a5_0x5bed,0xa8cf5));(self[a5_0x5a89a7(0x1ca)]=self[a5_0x5a89a7(0x1ca)]||[])[a5_0x5a89a7(0x1d9)]([[0x3db],{0x33e:(_0x4298d9,_0x3fe195,_0x2de2d8)=>{const _0x2f9012=a5_0x5a89a7;_0x2de2d8['r'](_0x3fe195),_0x2de2d8['d'](_0x3fe195,{'Game':()=>_0x350ad9});var _0x31d467=_0x2de2d8(0x24a);let _0x57ad2f,_0x1a76a0,_0x4be9b9,_0x5e2441;class _0x350ad9{constructor(_0x378620={}){const _0x38be99=a5_0x2af2;this[_0x38be99(0x1fa)]=[],this['players']=[],this[_0x38be99(0x214)]=0x0,this[_0x38be99(0x1be)]=0x0,this[_0x38be99(0x22a)]=[],this[_0x38be99(0x21c)]=[],this[_0x38be99(0x203)]=[],this['selectedCards']=[],this['selectedMeldIndex']=null,this[_0x38be99(0x1c4)]=0x1,this[_0x38be99(0x20b)]=0x1,this[_0x38be99(0x1f4)]='draw',this[_0x38be99(0x208)]=!0x1,this[_0x38be99(0x1e7)]=0x0,this[_0x38be99(0x207)]=!0x1,this[_0x38be99(0x231)]=[],this['lastDiscarderPlayerId']=null,this['gameLog']=[],this[_0x38be99(0x1a9)]=_0x378620[_0x38be99(0x1a9)]||0xc8,this[_0x38be99(0x1b6)]=[],this[_0x38be99(0x1dc)]=null,this['gameEndedThisTurn']=!0x1,this[_0x38be99(0x21e)]=null,this[_0x38be99(0x1a2)]=[],this[_0x38be99(0x1ec)]=_0x378620[_0x38be99(0x1ec)]||0xa,this[_0x38be99(0x1eb)]=!0x0,this['loopDetection']={'isActive':!0x1,'turnHistory':[],'maxHistoryLength':0x14,'loopThreshold':0x3,'detectedLoopCards':new Set(),'consecutiveReshuffles':0x0,'maxConsecutiveReshuffles':0xa},this[_0x38be99(0x1b5)]=['♠','♥','♦','♣'],this[_0x38be99(0x194)]=['A','2','3','4','5','6','7','8','9','10','J','Q','K'],this[_0x38be99(0x1a4)]=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd];}async[_0x2f9012(0x20c)](){const _0x452761=_0x2f9012;if(!_0x57ad2f){const _0x5473a0=await Promise[_0x452761(0x1b7)]([Promise[_0x452761(0x20d)]()['then'](_0x2de2d8['bind'](_0x2de2d8,0x1e9)),_0x2de2d8['e'](0x5d)[_0x452761(0x23d)](_0x2de2d8['bind'](_0x2de2d8,0x5d)),Promise[_0x452761(0x20d)]()[_0x452761(0x23d)](_0x2de2d8[_0x452761(0x1fd)](_0x2de2d8,0x274)),Promise[_0x452761(0x20d)]()[_0x452761(0x23d)](_0x2de2d8[_0x452761(0x1fd)](_0x2de2d8,0x347))]);_0x57ad2f=_0x5473a0[0x0][_0x452761(0x1a5)],_0x1a76a0=_0x5473a0[0x1][_0x452761(0x1f3)],_0x4be9b9=_0x5473a0[0x2][_0x452761(0x239)],_0x5e2441=_0x5473a0[0x3][_0x452761(0x1b8)];}}[_0x2f9012(0x20e)](){const _0x435c4a=_0x2f9012;this[_0x435c4a(0x1e3)](),this['addLogEntry']('Game\x20initialized.\x20Select\x20number\x20of\x20players\x20to\x20start.',_0x435c4a(0x202)),_0x31d467['o'][_0x435c4a(0x224)](this);}async['setupGame'](_0x4dad14,_0x36b05f){const _0x29d00f=_0x2f9012;if(await this['loadGameModules'](),this['players']=[],_0x4dad14<0x2||_0x4dad14>0x5)return this[_0x29d00f(0x1e1)]('Please\x20select\x20between\x202-5\x20players.','error'),void this[_0x29d00f(0x1e3)]();for(let _0x3c48c1=0x0;_0x3c48c1<_0x4dad14;_0x3c48c1++)this[_0x29d00f(0x232)][_0x29d00f(0x1d9)]({'id':_0x3c48c1,'name':_0x29d00f(0x1d1)+(_0x3c48c1+0x1),'hand':[],'status':_0x29d00f(0x18c),'score':0x0,'isHuman':_0x3c48c1<_0x36b05f,'isAI':_0x3c48c1>=_0x36b05f});this[_0x29d00f(0x1e7)]=0x0,this[_0x29d00f(0x1be)]=0x0,this['currentPlayerIndex']=(this['dealerIndex']+0x1)%this[_0x29d00f(0x232)]['length'],this[_0x29d00f(0x1c4)]=0x1,this[_0x29d00f(0x20b)]=0x1,this[_0x29d00f(0x22f)]=[],this['gameStartTime']=Date[_0x29d00f(0x23c)](),this[_0x29d00f(0x199)](),this[_0x29d00f(0x211)](_0x29d00f(0x233)+_0x4dad14+'\x20players\x20('+_0x36b05f+'\x20human,\x20'+(_0x4dad14-_0x36b05f)+_0x29d00f(0x1af)+this[_0x29d00f(0x1a9)]+'.',_0x29d00f(0x202));}[_0x2f9012(0x199)](){const _0x14870a=_0x2f9012;this['gameStarted']=!0x0,this[_0x14870a(0x1db)]=!0x1,this['tableMelds']=[],this[_0x14870a(0x237)](),this[_0x14870a(0x1ce)](),this[_0x14870a(0x232)]['forEach'](_0xe447d4=>{const _0x4936a0=_0x14870a;_0xe447d4[_0x4936a0(0x1c0)]=_0x4936a0(0x18c),_0xe447d4[_0x4936a0(0x1e2)]=[];}),this[_0x14870a(0x1dd)](),this[_0x14870a(0x1cd)](),this[_0x14870a(0x22b)](),this[_0x14870a(0x1ae)](),this[_0x14870a(0x21d)]();const _0x505c3b=this[_0x14870a(0x244)]();this[_0x14870a(0x211)](_0x14870a(0x1e9)+this[_0x14870a(0x1c4)]+_0x14870a(0x1bd)+this['ranks'][this[_0x14870a(0x20b)]-0x1]+'.',_0x14870a(0x1cc)),this[_0x14870a(0x211)](_0x14870a(0x1e6)+_0x505c3b['name']+_0x14870a(0x1a8),_0x14870a(0x1b3)),_0x505c3b[_0x14870a(0x1e4)]&&setTimeout(()=>this[_0x14870a(0x221)](),0x5dc);}[_0x2f9012(0x244)](){const _0x563798=_0x2f9012;return this[_0x563798(0x232)]&&0x0!==this['players'][_0x563798(0x1d6)]?this[_0x563798(0x232)][this[_0x563798(0x214)]]:null;}[_0x2f9012(0x1f0)](){const _0x4b61f6=_0x2f9012,_0x4873ea=this[_0x4b61f6(0x244)]();return _0x4873ea&&_0x4873ea[_0x4b61f6(0x216)];}[_0x2f9012(0x1d3)](){const _0x24e84d=_0x2f9012;if(!this[_0x24e84d(0x232)]||0x0===this[_0x24e84d(0x232)][_0x24e84d(0x1d6)])return;if(this['detectInfiniteLoop']())return void this['handleInfiniteLoop']();this[_0x24e84d(0x237)](),this['currentPlayerIndex']=(this[_0x24e84d(0x214)]+0x1)%this['players']['length'],this[_0x24e84d(0x1f4)]=_0x24e84d(0x1a6),this['selectedCards']=[],this[_0x24e84d(0x21b)]=null,this[_0x24e84d(0x207)]=!0x1,this[_0x24e84d(0x1db)]=!0x1,this[_0x24e84d(0x21d)]();const _0x5f3a7e=this['getCurrentPlayer']();_0x5f3a7e&&(this[_0x24e84d(0x211)]('It\x27s\x20'+_0x5f3a7e['name']+_0x24e84d(0x1a8),_0x24e84d(0x1b3)),_0x5f3a7e[_0x24e84d(0x1e4)]&&setTimeout(()=>this[_0x24e84d(0x221)](),0x5dc));}[_0x2f9012(0x19b)](){const _0x296da8=_0x2f9012;this['gameStarted']=!0x1,this[_0x296da8(0x232)][_0x296da8(0x18b)](_0x270c84=>{const _0x15db83=_0x296da8;if(_0x270c84[_0x15db83(0x1e2)][_0x15db83(0x1d6)]>0x0){const _0x1dc46a=this[_0x15db83(0x197)](_0x270c84);_0x270c84['score']+=_0x1dc46a,this['addLogEntry'](_0x15db83(0x1e9)+this['currentRound']+_0x15db83(0x1f6)+_0x270c84['name']+_0x15db83(0x217)+_0x1dc46a+_0x15db83(0x1b9)+_0x270c84['score']+'.',_0x15db83(0x1a0));}else this[_0x15db83(0x211)](_0x270c84[_0x15db83(0x18e)]+_0x15db83(0x215)+this[_0x15db83(0x1c4)]+'!','success');}),this[_0x296da8(0x21d)](),this[_0x296da8(0x232)][_0x296da8(0x193)](_0x53220f=>_0x53220f[_0x296da8(0x219)]>=this[_0x296da8(0x1a9)])?this[_0x296da8(0x213)]():(this[_0x296da8(0x1c4)]++,this[_0x296da8(0x20b)]=this[_0x296da8(0x20b)]%0xd+0x1,this[_0x296da8(0x1be)]=(this['dealerIndex']+0x1)%this[_0x296da8(0x232)][_0x296da8(0x1d6)],this[_0x296da8(0x214)]=(this[_0x296da8(0x1be)]+0x1)%this[_0x296da8(0x232)][_0x296da8(0x1d6)],setTimeout(()=>this[_0x296da8(0x199)](),0xfa0));}['endGame'](){const _0x393042=_0x2f9012;this[_0x393042(0x208)]=!0x1;const _0x52947f=[...this[_0x393042(0x232)]][_0x393042(0x20f)]((_0x5cecf2,_0x50ce05)=>_0x5cecf2[_0x393042(0x219)]-_0x50ce05['score']),_0x8d3999=_0x52947f[0x0];this['showNotification'](_0x393042(0x1f2)+_0x8d3999[_0x393042(0x18e)]+_0x393042(0x21f)+_0x8d3999['score']+_0x393042(0x1d5),_0x393042(0x1c2)),this[_0x393042(0x211)](_0x393042(0x1f2)+_0x8d3999[_0x393042(0x18e)]+_0x393042(0x21f)+_0x8d3999[_0x393042(0x219)]+_0x393042(0x1d5),_0x393042(0x240)),_0x52947f[_0x393042(0x18b)]((_0x443e5d,_0x40accd)=>{const _0x151671=_0x393042;this[_0x151671(0x211)](_0x40accd+0x1+'.\x20'+_0x443e5d[_0x151671(0x18e)]+_0x151671(0x242)+_0x443e5d['score']+'\x20points',_0x151671(0x202));}),setTimeout(()=>this[_0x393042(0x1d8)](),0x7d0);}[_0x2f9012(0x197)](_0x24d6c3){const _0x4c1438=_0x2f9012;return _0x24d6c3&&_0x24d6c3[_0x4c1438(0x1e2)]&&Array[_0x4c1438(0x21a)](_0x24d6c3[_0x4c1438(0x1e2)])?_0x24d6c3['hand'][_0x4c1438(0x1d4)]((_0x5711b3,_0x1c47e4)=>_0x1c47e4&&_0x1c47e4[_0x4c1438(0x19d)]?_0x5711b3+(_0x4c1438(0x210)===_0x24d6c3[_0x4c1438(0x1c0)]?0x19:_0x1c47e4[_0x4c1438(0x1ff)]):_0x5711b3+(_0x1c47e4?_0x1c47e4[_0x4c1438(0x1ff)]:0x0),0x0):0x0;}['newGame'](){const _0x48f80d=_0x2f9012;this[_0x48f80d(0x232)][_0x48f80d(0x18b)](_0x20fb9b=>{_0x20fb9b['score']=0x0;}),this[_0x48f80d(0x22f)]=[],this[_0x48f80d(0x208)]=!0x1,this['showSetupModal']();}[_0x2f9012(0x18d)](){const _0x3becbc=_0x2f9012;localStorage['setItem']('potterGameState',JSON['stringify'](this)),this[_0x3becbc(0x1e1)]('Game\x20state\x20saved!',_0x3becbc(0x1c2));}[_0x2f9012(0x1d2)](){const _0x37c61c=_0x2f9012,_0x96a14f=JSON[_0x37c61c(0x1cf)](localStorage[_0x37c61c(0x1aa)](_0x37c61c(0x23f)));_0x96a14f&&(Object['assign'](this,_0x96a14f),this['showNotification'](_0x37c61c(0x1c9),_0x37c61c(0x1c2)),this['updateDisplay']());}[_0x2f9012(0x1b1)](){const _0x5ad6cc=_0x2f9012;this[_0x5ad6cc(0x229)](),this[_0x5ad6cc(0x1d2)]();}['saveStateForUndo'](){const _0x416013=_0x2f9012;if(!this['gameStarted']||!this[_0x416013(0x1f0)]())return;const _0x15209b={'timestamp':Date[_0x416013(0x23c)](),'currentPlayerIndex':this[_0x416013(0x214)],'turnPhase':this['turnPhase'],'mustPlayMeldAfterTake':this[_0x416013(0x207)],'takenPileCards':JSON[_0x416013(0x1cf)](JSON[_0x416013(0x1f8)](this[_0x416013(0x231)])),'lastDiscarderPlayerId':this[_0x416013(0x19e)],'selectedCards':[...this[_0x416013(0x1ee)]],'selectedMeldIndex':this[_0x416013(0x21b)],'players':this['players'][_0x416013(0x23e)](_0x3b3330=>({'id':_0x3b3330['id'],'name':_0x3b3330['name'],'hand':JSON[_0x416013(0x1cf)](JSON[_0x416013(0x1f8)](_0x3b3330[_0x416013(0x1e2)])),'status':_0x3b3330[_0x416013(0x1c0)],'score':_0x3b3330[_0x416013(0x219)],'isHuman':_0x3b3330[_0x416013(0x216)],'isAI':_0x3b3330[_0x416013(0x1e4)]})),'drawPile':JSON[_0x416013(0x1cf)](JSON['stringify'](this[_0x416013(0x22a)])),'discardPile':JSON[_0x416013(0x1cf)](JSON[_0x416013(0x1f8)](this[_0x416013(0x21c)])),'tableMelds':JSON[_0x416013(0x1cf)](JSON[_0x416013(0x1f8)](this[_0x416013(0x203)])),'gameLogLength':this[_0x416013(0x22f)][_0x416013(0x1d6)]};this['undoHistory']['push'](_0x15209b),this[_0x416013(0x1a2)]['length']>this[_0x416013(0x1ec)]&&this[_0x416013(0x1a2)][_0x416013(0x1df)](),this[_0x416013(0x1eb)]=!0x0;}[_0x2f9012(0x1b0)](){const _0x2220cb=_0x2f9012;this[_0x2220cb(0x1eb)]&&0x0!==this['undoHistory'][_0x2220cb(0x1d6)]?this[_0x2220cb(0x1f0)]()?this['showUndoConfirmationModal']():this['showNotification'](_0x2220cb(0x1de),'error'):this[_0x2220cb(0x1e1)](_0x2220cb(0x206),'error');}[_0x2f9012(0x1c3)](){const _0x57f0f0=_0x2f9012;if(!this['canUndo']||0x0===this['undoHistory']['length'])return void this[_0x57f0f0(0x1e1)](_0x57f0f0(0x206),_0x57f0f0(0x236));const _0x2c559b=this[_0x57f0f0(0x244)]();if(!_0x2c559b)return;const _0x2bdad7=this[_0x57f0f0(0x1a2)]['pop']();this[_0x57f0f0(0x214)]=_0x2bdad7[_0x57f0f0(0x214)],this[_0x57f0f0(0x1f4)]=_0x2bdad7[_0x57f0f0(0x1f4)],this['mustPlayMeldAfterTake']=_0x2bdad7[_0x57f0f0(0x207)],this[_0x57f0f0(0x231)]=_0x2bdad7[_0x57f0f0(0x231)],this['lastDiscarderPlayerId']=_0x2bdad7[_0x57f0f0(0x19e)],this[_0x57f0f0(0x1ee)]=_0x2bdad7['selectedCards'],this[_0x57f0f0(0x21b)]=_0x2bdad7['selectedMeldIndex'],this[_0x57f0f0(0x232)][_0x57f0f0(0x18b)]((_0x2ace41,_0x269e7b)=>{const _0xc6ef0c=_0x57f0f0,_0x3914b0=_0x2bdad7['players'][_0x269e7b];_0x2ace41[_0xc6ef0c(0x1e2)]=_0x3914b0[_0xc6ef0c(0x1e2)],_0x2ace41[_0xc6ef0c(0x1c0)]=_0x3914b0[_0xc6ef0c(0x1c0)],_0x269e7b!==this[_0xc6ef0c(0x214)]&&(_0x2ace41[_0xc6ef0c(0x219)]=_0x3914b0[_0xc6ef0c(0x219)]);}),_0x2c559b[_0x57f0f0(0x219)]+=0x19,this[_0x57f0f0(0x22a)]=_0x2bdad7[_0x57f0f0(0x22a)],this['discardPile']=_0x2bdad7[_0x57f0f0(0x21c)],this[_0x57f0f0(0x203)]=_0x2bdad7[_0x57f0f0(0x203)],this[_0x57f0f0(0x22f)]=this[_0x57f0f0(0x22f)][_0x57f0f0(0x234)](0x0,_0x2bdad7['gameLogLength']),this['canUndo']=this[_0x57f0f0(0x1a2)][_0x57f0f0(0x1d6)]>0x0,this['hideUndoConfirmationModal'](),this['showNotification']('Move\x20undone!\x20+25\x20penalty\x20points.\x20New\x20score:\x20'+_0x2c559b[_0x57f0f0(0x219)],_0x57f0f0(0x1e0)),this[_0x57f0f0(0x211)](_0x2c559b[_0x57f0f0(0x18e)]+_0x57f0f0(0x1ef)+_0x2c559b['score']+'.',_0x57f0f0(0x1a0)),this[_0x57f0f0(0x21d)]();}[_0x2f9012(0x237)](){const _0x538411=_0x2f9012;this['undoHistory']=[],this[_0x538411(0x1eb)]=!0x1;}[_0x2f9012(0x1e3)](){const _0x22ea08=_0x2f9012;_0x31d467['o'][_0x22ea08(0x1e3)](this);}[_0x2f9012(0x229)](){_0x31d467['o']['hideSetupModal'](this);}[_0x2f9012(0x21d)](){const _0x19f735=_0x2f9012;_0x31d467['o'][_0x19f735(0x21d)](this);}[_0x2f9012(0x1e1)](_0x12f59d,_0x3ec2f8){const _0x1f708d=_0x2f9012;_0x31d467['o'][_0x1f708d(0x1e1)](_0x12f59d,_0x3ec2f8);}[_0x2f9012(0x211)](_0x2666b5,_0x1916cb){const _0xe23f9a=_0x2f9012;_0x31d467['o'][_0xe23f9a(0x211)](_0x2666b5,_0x1916cb,this);}['exportGameLog'](){const _0xc40fba=_0x2f9012;_0x31d467['o'][_0xc40fba(0x1fc)](this);}['hideMeldSelectionModal'](){_0x5e2441['hideMeldSelectionModal'](this);}[_0x2f9012(0x1d8)](){_0x31d467['o']['showScoreSummaryModal'](this);}[_0x2f9012(0x18f)](){const _0x34e221=_0x2f9012;_0x31d467['o'][_0x34e221(0x18f)](this);}[_0x2f9012(0x228)](){_0x31d467['o']['showUndoConfirmationModal'](this);}[_0x2f9012(0x1d0)](){const _0x208caf=_0x2f9012;_0x31d467['o'][_0x208caf(0x1d0)](this);}[_0x2f9012(0x1dd)](){const _0x416a69=_0x2f9012;_0x57ad2f[_0x416a69(0x1dd)](this);}[_0x2f9012(0x1cd)](){const _0x202464=_0x2f9012;_0x57ad2f[_0x202464(0x1cd)](this);}['dealCards'](){const _0x2dfb32=_0x2f9012;_0x57ad2f[_0x2dfb32(0x22b)](this);}[_0x2f9012(0x1ae)](){const _0x441c75=_0x2f9012;_0x31d467['o'][_0x441c75(0x1ae)](this);}[_0x2f9012(0x226)](){const _0x1c4b2e=_0x2f9012;_0x57ad2f[_0x1c4b2e(0x226)](this);}[_0x2f9012(0x1da)](){const _0xad0c96=_0x2f9012;_0x57ad2f[_0xad0c96(0x1da)](this);}[_0x2f9012(0x243)](_0x790792,_0x587445){const _0x5008e4=_0x2f9012;_0x4be9b9[_0x5008e4(0x243)](_0x790792,_0x587445,this);}[_0x2f9012(0x246)](_0x2f8280){const _0x1b800c=_0x2f9012;_0x4be9b9[_0x1b800c(0x246)](_0x2f8280,this);}[_0x2f9012(0x1fb)](){const _0x2b6f12=_0x2f9012;_0x4be9b9[_0x2b6f12(0x1fb)](this);}[_0x2f9012(0x241)](){const _0x531e93=_0x2f9012;_0x4be9b9[_0x531e93(0x241)](this);}[_0x2f9012(0x1ba)](){const _0x4c0736=_0x2f9012;_0x4be9b9[_0x4c0736(0x1ba)](this);}[_0x2f9012(0x221)](){const _0x38376c=_0x2f9012;_0x1a76a0[_0x38376c(0x221)](this);}['isGameOver'](){const _0x45dfc7=_0x2f9012;if(!this['players']||0x0===this['players'][_0x45dfc7(0x1d6)])return!0x1;const _0x54d2d3=this[_0x45dfc7(0x232)]['some'](_0x44b31b=>_0x44b31b[_0x45dfc7(0x219)]>=this[_0x45dfc7(0x1a9)]),_0x248ddf=this[_0x45dfc7(0x232)][_0x45dfc7(0x193)](_0x1f66e3=>this['hasPlayerWon'](_0x1f66e3));return _0x54d2d3||_0x248ddf;}[_0x2f9012(0x23b)](_0x922f6b){const _0x3d95a6=_0x2f9012;return!(!_0x922f6b||!_0x922f6b[_0x3d95a6(0x1e2)])&&0x0===_0x922f6b['hand'][_0x3d95a6(0x1d6)];}[_0x2f9012(0x1ce)](){const _0x15eff8=_0x2f9012;this[_0x15eff8(0x1ab)]={'isActive':!0x1,'turnHistory':[],'maxHistoryLength':0x14,'loopThreshold':0x3,'detectedLoopCards':new Set(),'consecutiveReshuffles':0x0,'maxConsecutiveReshuffles':0xa};}['recordTurnAction'](_0x1cdf76,_0xc8890c,_0x11a8eb=null,_0x13fb3f={}){const _0x4aaf7a=_0x2f9012,_0x2c1d23={'playerId':_0x1cdf76,'action':_0xc8890c,'cardId':_0x11a8eb,'timestamp':Date['now'](),'turnNumber':this[_0x4aaf7a(0x1ab)][_0x4aaf7a(0x198)][_0x4aaf7a(0x1d6)],..._0x13fb3f};this[_0x4aaf7a(0x1ab)][_0x4aaf7a(0x198)][_0x4aaf7a(0x1d9)](_0x2c1d23),this[_0x4aaf7a(0x1ab)][_0x4aaf7a(0x198)][_0x4aaf7a(0x1d6)]>this['loopDetection'][_0x4aaf7a(0x19a)]&&this['loopDetection']['turnHistory'][_0x4aaf7a(0x1df)]();}[_0x2f9012(0x1c6)](){const _0x9ff9eb=_0x2f9012,_0x52e315=this[_0x9ff9eb(0x1ab)][_0x9ff9eb(0x198)];if(_0x52e315[_0x9ff9eb(0x1d6)]<this[_0x9ff9eb(0x1ab)][_0x9ff9eb(0x189)]*this[_0x9ff9eb(0x232)][_0x9ff9eb(0x1d6)])return!0x1;if(this['loopDetection']['consecutiveReshuffles']>=this['loopDetection']['maxConsecutiveReshuffles'])return this['addLogEntry'](_0x9ff9eb(0x222)+this[_0x9ff9eb(0x1ab)]['consecutiveReshuffles']+_0x9ff9eb(0x1f5),'warning'),!0x0;const _0x4e5e0c=_0x52e315[_0x9ff9eb(0x204)](_0x42f82a=>_0x9ff9eb(0x23a)===_0x42f82a[_0x9ff9eb(0x1d7)])[_0x9ff9eb(0x234)](0x2*-this[_0x9ff9eb(0x232)][_0x9ff9eb(0x1d6)]);if(_0x4e5e0c[_0x9ff9eb(0x1d6)]>=0x2*this[_0x9ff9eb(0x232)][_0x9ff9eb(0x1d6)]){const _0x3337a5=_0x4e5e0c['slice'](0x0,this[_0x9ff9eb(0x232)][_0x9ff9eb(0x1d6)]),_0x23b81d=_0x4e5e0c[_0x9ff9eb(0x234)](this[_0x9ff9eb(0x232)][_0x9ff9eb(0x1d6)]),_0xfc70b9=_0x3337a5[_0x9ff9eb(0x23e)](_0x585308=>_0x585308[_0x9ff9eb(0x191)]),_0x4e8050=_0x23b81d[_0x9ff9eb(0x23e)](_0x3f7c7d=>_0x3f7c7d[_0x9ff9eb(0x191)]);if(this[_0x9ff9eb(0x205)](_0xfc70b9,_0x4e8050))return this[_0x9ff9eb(0x211)](_0x9ff9eb(0x218)+_0xfc70b9[_0x9ff9eb(0x19c)](',\x20')+']','warning'),_0xfc70b9[_0x9ff9eb(0x18b)](_0x3f61ae=>{const _0x2253d7=_0x9ff9eb;this[_0x2253d7(0x1ab)][_0x2253d7(0x247)][_0x2253d7(0x19f)](_0x3f61ae);}),!0x0;}return!0x1;}[_0x2f9012(0x192)](_0x5f3296){const _0x485fcc=_0x2f9012;_0x5f3296&&_0x5f3296[_0x485fcc(0x245)]&&(_0x5f3296[_0x485fcc(0x245)][_0x485fcc(0x23e)](_0x214f19=>_0x214f19['id']),Array[_0x485fcc(0x1c5)](this[_0x485fcc(0x1ab)][_0x485fcc(0x247)])[_0x485fcc(0x18b)](_0x3ce7c5=>{const _0x51fa76=_0x485fcc;let _0x5e4aab=null;this[_0x51fa76(0x232)][_0x51fa76(0x18b)](_0x297b8a=>{const _0x49169d=_0x51fa76,_0x488295=_0x297b8a['hand'][_0x49169d(0x223)](_0x11070c=>_0x11070c['id']===_0x3ce7c5);_0x488295&&(_0x5e4aab=_0x488295);}),_0x5e4aab&&_0x5f3296[_0x51fa76(0x245)]['some'](_0x5236ca=>_0x5e4aab[_0x51fa76(0x1ff)]===_0x5236ca[_0x51fa76(0x1ff)]&&_0x5e4aab[_0x51fa76(0x1a7)]!==_0x5236ca[_0x51fa76(0x1a7)]||_0x5e4aab['suit']===_0x5236ca[_0x51fa76(0x1a7)]&&Math['abs'](_0x5e4aab[_0x51fa76(0x1ff)]-_0x5236ca['value'])<=0x2)&&(this[_0x51fa76(0x1ab)][_0x51fa76(0x247)][_0x51fa76(0x220)](_0x3ce7c5),this[_0x51fa76(0x211)](_0x51fa76(0x200)+_0x5e4aab[_0x51fa76(0x22c)]+_0x5e4aab[_0x51fa76(0x1a7)]+'\x20due\x20to\x20matching\x20meld\x20played.',_0x51fa76(0x202)));}));}['arraysHaveSameElements'](_0xdaa504,_0x25e049){const _0x4cf684=_0x2f9012;if(_0xdaa504[_0x4cf684(0x1d6)]!==_0x25e049[_0x4cf684(0x1d6)])return!0x1;const _0x569677=new Set(_0xdaa504),_0x4c9814=new Set(_0x25e049);return _0x569677[_0x4cf684(0x1b2)]===_0x4c9814[_0x4cf684(0x1b2)]&&[..._0x569677][_0x4cf684(0x1ea)](_0x1226fa=>_0x4c9814[_0x4cf684(0x227)](_0x1226fa));}[_0x2f9012(0x1bf)](){const _0x5de854=_0x2f9012;this[_0x5de854(0x211)](_0x5de854(0x1bb),_0x5de854(0x1e0)),this['showNotification']('Infinite\x20loop\x20detected!\x20Loop\x20cards\x20will\x20be\x20redistributed.','warning');const _0x435db4=Array['from'](this[_0x5de854(0x1ab)][_0x5de854(0x247)]),_0x375765=this[_0x5de854(0x1ab)][_0x5de854(0x198)][_0x5de854(0x204)](_0x897afd=>'discard'===_0x897afd[_0x5de854(0x1d7)])['slice'](0x2*-this[_0x5de854(0x232)][_0x5de854(0x1d6)]);_0x435db4[_0x5de854(0x18b)](_0xa87a1b=>{const _0x579f99=_0x5de854,_0x2113a9=_0x375765[_0x579f99(0x223)](_0x59a992=>_0x59a992[_0x579f99(0x191)]===_0xa87a1b);if(_0x2113a9){const _0x4bb009=this[_0x579f99(0x232)][_0x2113a9[_0x579f99(0x1f9)]];if(_0x4bb009){const _0x109702=this['discardPile'][_0x579f99(0x1a1)](_0x30289d=>_0x30289d['id']===_0xa87a1b);if(-0x1!==_0x109702){const _0x4e1332=this[_0x579f99(0x21c)][_0x579f99(0x1a3)](_0x109702,0x1)[0x0];_0x4bb009[_0x579f99(0x1e2)][_0x579f99(0x1d9)](_0x4e1332),this[_0x579f99(0x211)](_0x4bb009[_0x579f99(0x18e)]+_0x579f99(0x18a)+_0x4e1332[_0x579f99(0x22c)]+_0x4e1332[_0x579f99(0x1a7)]+'.',_0x579f99(0x202));}}}}),this[_0x5de854(0x211)](_0x5de854(0x1c1),_0x5de854(0x202)),this['loopDetection']['consecutiveReshuffles']=0x0,this['updateDisplay']();}[_0x2f9012(0x1ed)](_0x301237){const _0x210f30=_0x2f9012;this[_0x210f30(0x1e1)](_0x210f30(0x1ad),_0x210f30(0x236)),this[_0x210f30(0x1e3)]();}[_0x2f9012(0x1ac)](){const _0x99ba04=_0x2f9012;this[_0x99ba04(0x1e1)]('Multiplayer\x20mode\x20is\x20not\x20available','error');}['joinRoom'](_0x34f7d3){const _0x1f70e0=_0x2f9012;this[_0x1f70e0(0x1e1)]('Multiplayer\x20mode\x20is\x20not\x20available','error');}[_0x2f9012(0x201)](){}[_0x2f9012(0x1f1)](_0x422966){}[_0x2f9012(0x22e)](_0x9c8ca){const _0x1bdc7e=_0x2f9012;this[_0x1bdc7e(0x235)]&&(this[_0x1bdc7e(0x232)]=_0x9c8ca[_0x1bdc7e(0x232)]||this[_0x1bdc7e(0x232)],this[_0x1bdc7e(0x214)]=_0x9c8ca[_0x1bdc7e(0x214)]||this[_0x1bdc7e(0x214)],this[_0x1bdc7e(0x22a)]=_0x9c8ca['drawPile']||this[_0x1bdc7e(0x22a)],this['discardPile']=_0x9c8ca[_0x1bdc7e(0x21c)]||this['discardPile'],this[_0x1bdc7e(0x203)]=_0x9c8ca[_0x1bdc7e(0x203)]||this[_0x1bdc7e(0x203)],this[_0x1bdc7e(0x1c4)]=_0x9c8ca[_0x1bdc7e(0x1c4)]||this[_0x1bdc7e(0x1c4)],this[_0x1bdc7e(0x20b)]=_0x9c8ca[_0x1bdc7e(0x20b)]||this[_0x1bdc7e(0x20b)],this['turnPhase']=_0x9c8ca[_0x1bdc7e(0x1f4)]||this['turnPhase'],this['updateDisplay']());}[_0x2f9012(0x226)](){const _0x4bf524=_0x2f9012;this['isMultiplayer']?this[_0x4bf524(0x1e5)]('draw-card'):_0x57ad2f[_0x4bf524(0x226)](this);}[_0x2f9012(0x1da)](){const _0x3a912e=_0x2f9012;this[_0x3a912e(0x235)]?this['sendPlayerAction'](_0x3a912e(0x196)):_0x57ad2f[_0x3a912e(0x1da)](this);}[_0x2f9012(0x241)](){const _0x4084cd=_0x2f9012;this[_0x4084cd(0x235)]?this[_0x4084cd(0x1e5)](_0x4084cd(0x225),{'selectedCards':this['selectedCards']}):_0x4be9b9['playSelectedMeld'](this);}[_0x2f9012(0x1ba)](){const _0x1412e8=_0x2f9012;this['isMultiplayer']?this['sendPlayerAction'](_0x1412e8(0x190)):_0x4be9b9[_0x1412e8(0x1ba)](this);}[_0x2f9012(0x1e5)](_0x25e94c,_0x18257e={}){const _0x2bb202=_0x2f9012;if(!this[_0x2bb202(0x235)]||!window[_0x2bb202(0x238)]?.[_0x2bb202(0x212)])return;const _0x14addd={'gameId':this[_0x2bb202(0x1fe)],'playerId':window['setupModal']['playerData']['id'],'action':_0x25e94c,..._0x18257e};window[_0x2bb202(0x238)][_0x2bb202(0x212)]['emit'](_0x2bb202(0x20a),_0x14addd);}[_0x2f9012(0x1c8)](){const _0x390e7b=_0x2f9012;return this[_0x390e7b(0x235)]&&window['setupModal']?this[_0x390e7b(0x232)][_0x390e7b(0x223)](_0xc4213b=>_0xc4213b['id']===window[_0x390e7b(0x238)]['playerData']['id']):this[_0x390e7b(0x232)][_0x390e7b(0x223)](_0x5a8ded=>_0x5a8ded[_0x390e7b(0x216)]);}[_0x2f9012(0x1f0)](){const _0x284f5d=_0x2f9012;if(this[_0x284f5d(0x235)]){const _0xf9a978=this['getCurrentPlayer']();return _0xf9a978&&_0xf9a978['id']===window[_0x284f5d(0x238)]?.['playerData']['id'];}return super[_0x284f5d(0x1f0)]?super['isCurrentPlayerHuman']():this['getCurrentPlayer']()?.['isHuman']||!0x1;}}}}]);